---
title: "Lab 01 - Hello R!"
output: 
  tufte::tufte_html:
    css: ../lab1.css
    tufte_variant: "envisioned"
    highlight: pygments
link-citations: yes
---
# Objectives

After completing this lab, you should be able to:

- clone a GitHub repository to your Posit Cloud workspace  
- edit and knit a Quarto file  
- commit edits locally using Git  
- push edits to GitHub  
- modify simple R code to explore and visualize data  

```{marginfigure}
R is the name of the programming language itself and RStudio is a convenient interface.
```

One goal of this lab is to introduce you to R, RStudio, and Quarto files, which we will be using throughout the course both to learn the statistical concepts discussed in the course and to analyze real data. 

```{marginfigure}
git is a version control system (like "Track Changes" features from Microsoft Word on steroids) and GitHub is the home for your Git-based projects on the internet (like DropBox but much, much better).
```

An additional goal is to introduce you to Git and GitHub, which is the collaboration and version control system that we will be using throughout the course.

# Instructions

For the first part of the lab, you'll follow the instructions in this document to get set up with GitHub and clone the lab-01 template from your lab-01 GitHub repo into Posit Cloud. You'll then complete the lab in your template .qmd file in Posit Cloud.


# Connecting GitHub and Posit Cloud

I will send an invitation to join the GitHub organization for this course. You need to accept the invitation before moving on to the next step. You should receive an email notification.

Connect your RStudio and GitHub accounts by following the steps below:

1.   In Posit Cloud, click on your name on the top right corner to open the right menu. Then, click on Authentication.

```{r github-auth-1, echo = FALSE}
knitr::include_graphics("img/github-auth-1.png")
```

1.   In the Authentication window, check the box next to the GitHub logo for *Enabled*.

```{r github-auth-2, echo = FALSE}
knitr::include_graphics("img/github-auth-2.png")
```

1.   In the next window, click on the green box that says "Authorize Posit hosted".

```{r github-auth-3, echo = FALSE}
knitr::include_graphics("img/github-auth-3.png")
```

1.   Back in the Authentication window, check the box for *Private repo access also enabled*, and once again, on the green box that says "Authorize Posit hosted" in the next window. At this point you should also make sure that the course organization shows up for you under *Organization access*. If it does not, this means you have not yet accepted the GitHub invitation to join the course, and you should go back and do that.

```{r github-auth-4, echo = FALSE}
knitr::include_graphics("img/github-auth-4.png")
```

1.   Once you're done, both of these boxes should be checked.

```{r github-auth-5, echo = FALSE}
knitr::include_graphics("img/github-auth-5.png")
```

1.   To confirm that you've successfully linked up your GitHub and Posit Cloud accounts, go to [GitHub settings \> Applications](https://github.com/settings/applications). You should see Posit Cloud listed as an authorized app under *Authorized OAuth Apps*. If you don't see this, now is a good time to ask for help (but first go back and re-read the instructions carefully to make sure you followed each step as specified).

```{r github-auth-6, echo = FALSE}
knitr::include_graphics("img/github-auth-6.png")
```

Next you need to set up a personal access token (PAT), which is like a password that you can store on your computer to be able to easily access your GitHub account from RStudio. 

1.   Go to github.com and make sure you're signed into your account. In the upper-right corner of any page, click your profile photo, then click *Settings*.

1.   At the bottom of the left sidebar, click *Developer settings*, then select *Personal access tokens / Tokens (classic)*

1.   Click Generate new token. Give your token a descriptive name and set the expiration to a date after the semester ends. We want to use the token to access repositories, so under "Scopes," select *repo*.

1.   Click Generate token. 

**You'll never be able to access the token again after you leave this page, so you absolutely, positively MUST copy and paste it into a word doc or txt file NOW and save to your desktop or course folder where you can easily find it!!!**

1.   Go back to Posit Cloud and open any project in our course workspace. Copy and paste the code below into your R console. Hit enter to run the code. Copy and paste your PAT into the console when prompted. 
```{r eval=FALSE}
gitcreds::gitcreds_set()
```

You should now be set up with GitHub. Keep your PAT file handy because you will need to enter it using the `gitcreds::gitcreds_set()` function every time you start a new Posit Cloud session.

# Cloning a GitHub repo

Each of your assignments will begin with the following steps. Note that future labs will start with a "Getting started" section, but details will be a bit more sparse than this. You can always refer back to this lab for a detailed list of the steps involved for getting started with an assignment.

1.   Click on the lab-01 assignment link that you should have received via email to create your GitHub repository for this lab (which we'll refer to as "repo" going forward). This repo contains a template you can build on to complete your assignment.

```{r clone-repo-link, fig.margin = TRUE, echo = FALSE, fig.width=3}
knitr::include_graphics("img/clone-repo-link.png")
```

1.   In GitHub, click on the green **<>Code** button. Click on the copy icon to copy the repo URL.

1.   Go to our Posit Cloud course workspace. Click on the **New Project** button and select from **New Project from Git Repository**.

1.   Copy and paste the URL of your assignment repo into the dialog box. Hit OK. Your lab template is now cloned in your Posit Cloud workspace. 


# Stage, commit, push!

```{marginfigure}
The top portion of your Quarto file (between the three dashed lines) is called YAML. It stands for "yet another markup language" or "YAML ain't markup language". It is a human friendly data serialization standard for all programming languages. All you need to know is that this area is called the YAML (we will refer to it as such) and that it contains meta information about your document.
```

## Modifying and rendering Quardo documents

1.   Open the R Quarto (qmd) file in your project, change the author name to your name, and render the document by clicking the "Render" button".

```{r yaml-raw-to-rendered, fig.fullwidth=TRUE, echo = FALSE}
knitr::include_graphics("img/yaml-raw-to-rendered.png")
```

1.   Go to the Git pane in RStudio, accessible as a tab in the top right RStudio pane. 

1.   Click the **Diff** button below the tabs in this pane. 

If you have made and saved changes to your qmd file, you should see those changes listed here. This window shows you the *diff*erence between the last committed state of the document and its current state that includes your changes.

## Staging changes

1.   A list of files associated with your project that have changed should be visible on the left side of this window. Check the box next to each of these files. This tells Git you want to include the files in your commit. This is called *staging*. 

## Committing changes

1.   In the **Commit message** box, type the words, *Update author name*, and hit **Commit**. You have now saved, or *committed* this version of your project locally in Git.

```{r update-author-name-commit, fig.fullwidth=TRUE, echo = FALSE}
knitr::include_graphics("img/update-author-name-commit.png")
```

You don't have to commit after every change. This would get cumbersome. You should consider committing states, or *versions*, that are *meaningful to you*. In the first few assignments the instructions will tell you exactly when to commit and in some cases, what commit message to use. As the semester progresses you will make these decisions.

## Pushing changes to GitHub

Now that you have made an update and committed this change, it's time to push these changes to your GitHub repo so others can see your changes. And by others, we mean the instructor (only you and the instructor can access your repos in this course).

1.   Click the **Push** button. Your changes will now be sent to your GitHub repo.

If you are prompted to enter your GitHub username, it's because your cached PAT has expired (maybe you stepped away from the assignment for a while or you picked it back up after starting it earlier). If that's the case, close the window asking for your username and type `gitcreds::gitcreds_set()` into the console. Enter your GitHub PAT when prompted. Remember, this is not your password for logging into GitHub. It's your personal access token (PAT) -- the long string of letters and numbers that you created in GitHub and saved somewhere on your computer. 

1.   In your web browser, go back to your lab-01 GitHub repo. The main page will list your lab-01 project files and show when the last commit was made. If you click on your lab-01-yourname.md file in GitHub, you should see your name under the title.

You're done with this part of the lab! Complete the remaining exercises in your lab-01 template file.

